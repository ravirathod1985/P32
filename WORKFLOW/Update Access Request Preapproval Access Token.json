{
  "id": "b66efb16-4c29-42e7-ab94-b4dae521f7a9",
  "name": "Update Access Request Preapproval Access Token",
  "description": "",
  "created": "2023-05-10T14:28:03.787285301Z",
  "modified": "2023-05-10T14:28:03.787285301Z",
  "modifiedBy": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d7970c2560",
    "name": "12073"
  },
  "definition": {
    "start": "HTTP Request",
    "steps": {
      "HTTP Request": {
        "actionId": "sp:http",
        "attributes": {
          "authenticationType": null,
          "method": "post",
          "url": "https://{tenant}.api.identitynow.com/oauth/token",
          "urlParams": {
            "client_id": "862aa98b-f39b-490c-xxx-xxxxx",
            "client_secret": "6ebf9b15xxxxxx",
            "grant_type": "client_credentials"
          }
        },
        "nextStep": "HTTP Request 1",
        "type": "action",
        "versionNumber": 2
      },
      "HTTP Request 1": {
        "actionId": "sp:http",
        "attributes": {
          "authenticationType": "OAuth",
          "jsonPatchRequestBody": [
            {
              "op": "replace",
              "path": "/httpConfig/bearerTokenAuthConfig/bearerToken",
              "value": "{{$.hTTPRequest.body.access_token}}"
            }
          ],
          "jsonRequestBody": {
            "description": "",
            "enabled": true,
            "httpConfig": {
              "basicAuthConfig": null,
              "bearerTokenAuthConfig": {
                "bearerToken": "{{$.hTTPRequest.body.access_token}}"
              },
              "httpAuthenticationType": "BEARER_TOKEN",
              "httpDispatchMode": "ASYNC",
              "url": "https://{tenant}.api.identitynow.com/beta/workflows/execute/external/{id}"
            },
            "name": "Workflow",
            "responseDeadline": "PT1H",
            "triggerId": "idn:access-request-pre-approval",
            "triggerName": "Access Request Submitted",
            "type": "HTTP"
          },
          "method": "patch",
          "oAuthClientId": "1758c03fdbf64401876f69b6c6e2c7b7",
          "oAuthClientSecret": "$.secrets.5919bcbf-8f1d-4d96-9747-63634446ff10",
          "oAuthCredentialLocation": "oAuthInHeader",
          "oAuthTokenUrl": "https://devrel.api.identitynow.com/oauth/token",
          "requestContentType": "json-patch+json",
          "url": "https://{tenant}.api.identitynow.com/beta/trigger-subscriptions/{id}"
        },
        "nextStep": "success",
        "type": "action",
        "versionNumber": 2
      },
      "success": {
        "type": "success"
      }
    }
  },
  "enabled": false,
  "creator": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d7970c2560",
    "name": "12073"
  },
  "owner": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d7970c2560",
    "name": "12073"
  },
  "trigger": {
    "type": "SCHEDULED",
    "attributes": {
      "cronString": "0 0 * * 0",
      "frequency": "weekly",
      "id": "idn:cron-schedule",
      "timeZone": "America/New_York",
      "weeklyDays": [
        "Sunday"
      ],
      "weeklyTimes": [
        "00:00"
      ]
    }
  }
}