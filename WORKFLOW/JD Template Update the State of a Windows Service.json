{
  "id": "42b41e7e-c3f7-4dd2-8858-d87def5d7dab",
  "name": "JD Template: Update the State of a Windows Service",
  "description": "This privileged interactive workflow allows you to stop, start, or restart a Windows service.\n\nYou will be asked to choose the service and operation using an interactive form.",
  "created": "2025-05-30T20:44:28.523039467Z",
  "modified": "2025-05-30T20:44:28.523039467Z",
  "modifiedBy": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d7970c2560",
    "name": "12073"
  },
  "definition": {
    "start": "Interactive Form 1",
    "steps": {
      "Compare Strings": {
        "choiceList": [
          {
            "comparator": "StringMatches",
            "nextStep": "Interactive Message 2",
            "variableA.$": "$.windowsServer1.result.data",
            "variableB": "already"
          }
        ],
        "defaultStep": "Interactive Message 5",
        "description": "The service update was successful. The service state is now evaluated to determine if it was already in the desired state.",
        "displayName": "Service Already in Desired State?",
        "type": "choice"
      },
      "End Step - Failure": {
        "description": "The workflow cannot continue as the service update failed. The workflow ends in a failed state.",
        "displayName": "Failure: Service Update Error",
        "failureName": "Service Update Error",
        "type": "failure"
      },
      "End Step - Failure 1": {
        "description": "The workflow cannot continue as the retrieval of services failed. The workflow ends in a failed state.",
        "displayName": "Failure: Get Services Error",
        "failureName": "Get Services Error",
        "type": "failure"
      },
      "End Step - Success": {
        "description": "The service has been updated. The workflow completed successfully.",
        "displayName": "",
        "type": "success"
      },
      "End Step - Success 1": {
        "description": "The workflow has completed successfully. The service was already in the desired state.",
        "displayName": "Success: Service Already in Desired State",
        "type": "success"
      },
      "Interactive Form": {
        "actionId": "sp:interactive-form",
        "attributes": {
          "formDefinitionId": "5e5fe999-e30b-4b5e-a28d-0a18b0e195c4",
          "inputForForm_array_services.$": "$.windowsServer.result.data",
          "inputForForm_array_services_label": "$.DisplayName",
          "inputForForm_array_services_subLabel": "$.State",
          "inputForForm_array_services_value": "$.Name",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Select Service & Operation"
        },
        "description": "Interactive form allowing the user to select a service & choose whether to stop, start, or restart that service.",
        "displayName": "Form: Select Service and Operation",
        "nextStep": "Interactive Message 1",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Form 1": {
        "actionId": "sp:interactive-form",
        "attributes": {
          "formDefinitionId": "637ac8d9-2edb-43ee-bfa6-3b8dd4080a58",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Introduction"
        },
        "description": "This interactive form explains the purpose of the workflow and what the user will need to do to complete it.",
        "displayName": "Form: Introduction",
        "nextStep": "Interactive Message",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Getting all services from the server...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ”Ž  Getting Services"
        },
        "description": "This interactive message notifies the user that the workflow is currently retrieving all services from the target server.",
        "displayName": "Message: Getting Services",
        "nextStep": "Windows Server",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 1": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Updating service '{{ $.interactiveForm.formData.service }}'...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ”§  Updating Service State"
        },
        "description": "This interactive message notifies the user that the workflow is currently updating the state of the selected service.",
        "displayName": "Message: Updating Service State",
        "nextStep": "Windows Server 1",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 2": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Service '{{ $.interactiveForm.formData.service }}' was already in the selected state.</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "âœ…  Service State Unchanged"
        },
        "description": "This interactive message notifies the user that the selected service was already in the desired state.",
        "displayName": "Message: Service State Unchanged",
        "nextStep": "End Step - Success 1",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 3": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Display Name: {{ $.windowsServer2.result.data.DisplayName }}</p>\n<p>Name: {{ $.windowsServer2.result.data.Name }}</p>\n<p>State: {{ $.windowsServer2.result.data.State }}</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ“‹  Updated Service State"
        },
        "description": "This interactive message displays the updated state of the service to the user.",
        "displayName": "Message: Show Updated State",
        "nextStep": "End Step - Success",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 4": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Failed to {{ $.interactiveForm.formData.operation }} the '{{ $.interactiveForm.formData.service }}' service!</p>\n<p>&nbsp;</p>\n<p>Detail Code: {{ $.windowsServer1.error.detailCode }}<br><br></p>\n<p>Error: {{ $.windowsServer1.error.message.text }}</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Failure: Update Service State"
        },
        "description": "This interactive message notifies the user that an error has occurred, and the service update failed.",
        "displayName": "Message: Service Update Failed",
        "nextStep": "End Step - Failure",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 5": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>{{ $.windowsServer1.result.data }}</p>\n<p>Getting updated service details...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "âœ…  Operation Complete"
        },
        "description": "This interactive message displays the command output from the target server to the user.",
        "displayName": "Message: Show Command Output",
        "nextStep": "Windows Server 2",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 6": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Failed to get services from the server!</p>\n<p>&nbsp;</p>\n<p>Detail Code: {{ $.windowsServer.error.detailCode }}<br><br></p>\n<p>Error: {{ $.windowsServer.error.message.text }}</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Failure: Get Services"
        },
        "description": "This interactive message notifies the user that the workflow failed to retrieve services from the target server.",
        "displayName": "Message: Getting Services Failed",
        "nextStep": "End Step - Failure 1",
        "type": "action",
        "versionNumber": 1
      },
      "Windows Server": {
        "actionId": "sp:pag-windows-server",
        "attributes": {},
        "catch": [
          {
            "next": "Interactive Message 6"
          }
        ],
        "description": "The Privileged Action Gateway retrieves all services from the target server.",
        "displayName": "PAG: Get All Services",
        "nextStep": "Interactive Form",
        "type": "action",
        "versionNumber": 1
      },
      "Windows Server 1": {
        "actionId": "sp:pag-windows-server",
        "attributes": {},
        "catch": [
          {
            "next": "Interactive Message 4"
          }
        ],
        "description": "The Privileged Action Gateway stops, starts, or restarts the selected service on the target server based on the userâ€™s selections in the interactive form.",
        "displayName": "PAG: Update Service",
        "nextStep": "Compare Strings",
        "type": "action",
        "versionNumber": 1
      },
      "Windows Server 2": {
        "actionId": "sp:pag-windows-server",
        "attributes": {},
        "description": "The Privileged Action Gateway retrieves the updated state of the selected service.",
        "displayName": "PAG: Get Updated State",
        "nextStep": "Interactive Message 3",
        "type": "action",
        "versionNumber": 1
      }
    }
  },
  "enabled": false,
  "creator": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d7970c2560",
    "name": "12073"
  },
  "owner": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d7970c2560",
    "name": "12073"
  },
  "trigger": {
    "type": "EVENT",
    "attributes": {
      "filter.$": "$[?(@.workflowId == '42b41e7e-c3f7-4dd2-8858-d87def5d7dab')]",
      "id": "idn:interactive-process-launched"
    }
  }
}