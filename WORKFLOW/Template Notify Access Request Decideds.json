{
  "id": "36bb7a2e-dcfc-4ec5-9087-87771ae55a7c",
  "name": "Template: Notify Access Request Decideds",
  "description": "A five-step workflow that emails two identities when an access request is approved or denied.",
  "created": "2024-05-01T10:50:11.759314579Z",
  "modified": "2024-05-07T09:42:20.497285843Z",
  "modifiedBy": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d88bd02b35",
    "name": "27286"
  },
  "definition": {
    "start": "Get Identity",
    "steps": {
      "Get Identity": {
        "actionId": "sp:get-identity",
        "attributes": {
          "id.$": "$.trigger.requestedFor.id"
        },
        "description": "Get the identity data for the identity that the access was requested for.  This will be used to lookup the identity's manager.",
        "nextStep": "Get Identity 1",
        "type": "action",
        "versionNumber": 2
      },
      "Get Identity 1": {
        "actionId": "sp:get-identity",
        "attributes": {
          "id.$": "$.getIdentity.managerRef.id"
        },
        "description": "This node is used to gather information about the user's manager to populate their email.",
        "nextStep": "Send Email 2",
        "type": "action",
        "versionNumber": 2
      },
      "Send Email": {
        "actionId": "sp:send-email",
        "attributes": {
          "body": "Dear ${manager},<br><p>This email is to inform you that your direct report <b style=\"\">${directReport}</b>, has requested access with <b style=\"\">ID${requestID}</b>. This request has a status of:<br><b style=\"\"> ${status}</b>. </p><br><p>Thank you, <br> Your Access Team</p>",
          "context": {
            "directReport.$": "$.getIdentity.attributes.displayName",
            "manager.$": "$.getIdentity1.attributes.firstname",
            "requestID.$": "$.trigger.accessRequestId",
            "status.$": "$.trigger.requestedItemsStatus"
          },
          "recipientEmailList.$": "$.getIdentity1.attributes.email",
          "subject": "Your employee has an update to their access"
        },
        "description": "Send an email to the identity's manager to notify them of the access change.",
        "nextStep": "success",
        "type": "action",
        "versionNumber": 2
      },
      "Send Email 2": {
        "actionId": "sp:send-email",
        "attributes": {
          "body": "Dear ${IdName},<br><p>This email is to inform you that your access request with ID <b style=\"\">${accessR} </b>has been determined with the following status <br> <b style=\"\">${requestStatus}. </p><br><p>Thank you,<br>Your Access Team</p>",
          "context": {
            "IdName.$": "$.getIdentity.attributes.displayName",
            "accessR.$": "$.trigger.accessRequestId",
            "requestStatus.$": "$.trigger.requestedItemsStatus"
          },
          "recipientEmailList.$": "$.getIdentity.attributes.email",
          "replyTo": null,
          "subject": "Your access has been decided"
        },
        "description": "Send an email to the identity that is the target of the access request with the details of the decision.",
        "nextStep": "Send Email",
        "type": "action",
        "versionNumber": 2
      },
      "success": {
        "type": "success"
      }
    }
  },
  "enabled": false,
  "creator": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d88bd02b35",
    "name": "27286"
  },
  "owner": {
    "type": "IDENTITY",
    "id": "2c9180887f4b7fdb017f51d88bd02b35",
    "name": "27286"
  },
  "trigger": {
    "type": "EVENT",
    "attributes": {
      "filter.$": "$.trigger.requestedItemsStatus[?(@.name == \"department\")]",
      "id": "idn:access-request-post-approval"
    }
  }
}